package com.app.beans;

import java.io.File;
import java.util.List;

import com.app.daos.QuestionDao;
import com.app.daos.QuestionDaoImp;
import com.app.daos.QuizDao;
import com.app.daos.QuizDaoImp;
import com.app.pojos.Question;
import com.app.pojos.Quiz;
import com.app.util.QuestionFileParser;

public class CreateQuizBean {
	private String title;
	private File file;
	private Quiz q;
	public CreateQuizBean() {
	}
	public String getTitle() {
		return title;
	}
	public void setTitle(String title) {
		this.title = title;
	}
	public File getFile() {
		return file;
	}
	public void setFile(File file) {
		this.file = file;
	}
	public Quiz getQ() {
		return q;
	}
	public void setQ(Quiz q) {
		this.q = q;
	}
	public void createQuiz() {
		try (QuizDao quizDao = new QuizDaoImp()) {
			int quizId = quizDao.insert(q);
			List<Question> list = QuestionFileParser.parse(file);
			try (QuestionDao questionDao = new QuestionDaoImp()) {
				for (Question q : list) {
					q.quiz_id = quizId;
					questionDao.insert(q,title); 	
				}
			}
			System.out.println("Quiz imported Successfully ");
		}
	}
}
