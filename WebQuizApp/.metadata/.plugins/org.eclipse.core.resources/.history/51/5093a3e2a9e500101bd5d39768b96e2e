package com.app.daos;

import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import com.app.pojos.Attempts;

public class AttemptDaoImp extends Dao implements AttemptDao{

	private PreparedStatement stmtFindAll;
	
	public AttemptDaoImp() throws Exception {
		stmtFindAll = con.prepareStatement("SELECT attempt_id,quiz_id,quiz_attempts.user_id,name,final_score,total_questions FROM quiz_attempts INNER JOIN users ON quiz_attempts.user_id = users.user_id");
	}

	@Override
	public List<Attempts> findAll() throws Exception {
		List<Attempts> list = new ArrayList<>();
		try(ResultSet rs = stmtFindAll.executeQuery()) {
			while(rs.next()) {
				int attempt_id = rs.getInt("");
				int quiz_id = rs.getInt("");
				
				Attempts at = new Attempts(quiz_id, quiz_id, quiz_id, null, attempt_id, quiz_id, null);
				list.add(at);
			}
		}
		return list;
	}
	
}
