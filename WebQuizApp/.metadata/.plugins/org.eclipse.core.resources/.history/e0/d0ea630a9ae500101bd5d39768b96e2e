<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page import="com.app.beans.QuestionListBean" %>
<!DOCTYPE html>
<html>
<head>
    <title>Quiz in Progress</title>
</head>
<body>
    <jsp:useBean id="qlb" class="com.app.beans.QuestionListBean" scope="page"/>
    <% 
        // Get the quiz_id from the URL parameter and fetch questions
        String qid = request.getParameter("quiz_id");
        if(qid != null) {
            // Note: You should update QuestionListBean to have a setQuizId() 
            // and a getQuestionsByQuizId() method
            qlb.getQuestions(); 
        }
    %>

    <h2 style="text-align: center;">Quiz ID: ${param.quiz_id}</h2>
    
    <form action="submitscore.jsp" method="post">
        <input type="hidden" name="quiz_id" value="${param.quiz_id}">

        <c:forEach var="q" items="${qlb.queList}" varStatus="status">
            <div style="margin-bottom: 20px; border: 1px solid #ccc; padding: 10px;">
                <p><strong>Question ${status.count}:</strong> ${q.text}</p> <input type="radio" name="answer_${q.id}" value="A" required> ${q.a} <br>
                <input type="radio" name="answer_${q.id}" value="B"> ${q.b} <br>
                <input type="radio" name="answer_${q.id}" value="C"> ${q.c} <br>
                <input type="radio" name="answer_${q.id}" value="D"> ${q.d} <br>
            </div>
        </c:forEach>

        <br>
        <div style="text-align: center;">
            <button type="submit" style="padding: 10px 20px;">Submit My Answers</button>
        </div>
    </form>
</body>
</html>